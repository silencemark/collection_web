	<!DOCTYPE html>
	 <html lang="en">
	 <head>
	     <meta charset="UTF-8">
	     <title>享GO影视</title>
	     <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,initial-scale=1.0"/>
	     <link rel="stylesheet" type="text/css" href="../css/public.css"/>
	     <link rel="stylesheet" type="text/css" href="../css/index.css"/>
	     <link rel="stylesheet" type="text/css" href="../css/myCenter.css"/>
	     <script src="../js/jquery-3.4.1.js"></script>
	     <script src="../js/vue.js"></script>
	     <script src="../js/jq-alert.js"></script>
	 </head>
	 <body>

	<section class="main"  id="app">
	    <div class="title" style="position: fixed;z-index:3;">
	         <img src="../img/to-left.png" v-if="comment.orderid" :onclick="`window.location.href='bagOwnInfo.html?orderid=${comment.orderid}'`"/>
	         <img src="../img/to-left.png" v-else onclick="history.back(-1)"/>
	        观影好评
	    </div>

	<div class="comment">
		<div v-if="comment.orderid">
			<span style="font-weight:600;margin-left:20px;">全部好评</span>
			<span style="float: right;margin-right:55px;" v-if="wMin<=1" @click="goComment">
				参与评论
			</span>
			<span style="float: right;margin-right:55px;" v-if="wMin>1">
				再观看{{wMin}}秒可评论
			</span>
			<img src="../img/edit-ic.png"/>
		</div>
		<div v-else>
			<span style="font-weight:600;margin-left:20px;" >VIP会员观看更多精彩影视</span>
		</div>
	    
	    
	    
	</div>



<div id="contMsg">

</div>
<iframe :src="httpurl"  scrolling="no"  class="videoFrame" id="scrollWrap">
</iframe>

	 <footer id="footer">
	    <ul id="footer_list" style="z-index: 2;">
	       <li class="list_li home active">
	           <a href="../index.html" class="text">首页</a>
	       </li>
	       <li class="list_li follow" >
	           <a  href="../activity.html" class="text">活动中心</a>
	       </li>
	       <li class="list_li cart">
	           <a  href="../cardBag/bagOwn.html" class="text">卡包</a>
	       </li>
	       <li class="list_li profile">
	           <a  href="../myCenter.html" class="text">我的</a>
	       </li>
	   </ul>
	  </footer>
	<!-- end footer-->

	<!--评论窗口-->
	<div id="commentWindow" style="display: none;">
	    <div class="loading commentLoadCont" style="background-color:#fff;opacity: 0.9 !important;"></div>
	    <div class="commentWinCont">
	        <div class="xinCont">
	            为影片打分：
	            <img :src="comment.stars>0?'../img/sXin.png':'../img/eXin.png'" @click="comment.stars=1" class="xin"/>
	            <img :src="comment.stars>1?'../img/sXin.png':'../img/eXin.png'" @click="comment.stars=2" class="xin" style="margin-left: 30px;"/>
	            <img :src="comment.stars>2?'../img/sXin.png':'../img/eXin.png'" @click="comment.stars=3" class="xin" style="margin-left: 60px;"/>
	            <img :src="comment.stars>3?'../img/sXin.png':'../img/eXin.png'" @click="comment.stars=4" class="xin" style="margin-left: 90px;"/>
	            <img :src="comment.stars>4?'../img/sXin.png':'../img/eXin.png'" @click="comment.stars=5" class="xin" style="margin-left: 120px;"/>
	            &nbsp;&nbsp;&nbsp;&nbsp;
	            <span style="margin-left:130px;">{{comment.stars}}星</span>
	        </div>
	        <div style="width: 80%;margin-top: 30px;">
	            不想打字？嫌打字太麻烦？那么试试好评标签吧。一键您输入评论信息！
	        </div><br/>
	        <div style="width:88%;height: 108px;">
	            <div class="commentLabe">哇这个视频真好看</div>
	            <div class="commentLabe" style="margin-left:122px;margin-top:5px;">哎哟不错很棒棒哦</div>
	            <div class="commentLabe" style="margin-left:245px;margin-top:2px;">挺好看的</div>
	            <div class="commentLabe" style="margin-top:35px;">视频很好看，请问好评送女朋友吗？</div>
	            <div class="commentLabe" style="margin-top:48px;margin-left:222px;">天呐太精彩了</div>
	            <div class="commentLabe" style="margin-top: 70px;margin-left: 50px;">这世界那么美，有你才完美</div>
	        </div>
	        <div>我要评论:</div>
	        <textarea class="commentText" ref="commentText">
	        </textarea>
	        <div style="font-size: 0.8rem;color:#f67e1c;font-weight:500;">{{errMsg}}</div>
	        <div>
	            <div class="btn btn-200" @click="subComment" style="margin-left:18%;margin-top: 5px;">立 即 评 论</div>
	        </div>
	    </div>
	</div>
	<!--end评论窗口-->

	</section>
	</body>

<!-- <script type="text/javascript" charset="utf-8">
	document.write('<iframe seamless sandbox security="restricted" id="url_mainframe" frameborder="0" scrolling="yes" name="main" src="http://www.wanmeikk.me/project/2067.html" style="height:1000px; visibility: inherit; width: 100%; z-index: 1;overflow: visible;"></iframe>');
</script> -->

<script  type="text/javascript">
	    $(function(){
	        $(".commentLabe").click(function(){
	            $(".commentLabe").removeClass("commentLabeActiv");
	            $(this).addClass("commentLabeActiv");
	            $(".commentText").val($(this).html());
	        })
	    })

	    new Vue({
	      el: '#app',
	      data: function() {
	        return {
	            httpurl:'',
				comment:{
	                stars:3,
					comment:'',
					movieid:'',
					orderid:'',
	            },
	            wMin:10,
	            errMsg:'',
	        }
	      },
	      created() {
			  this.httpurl = this.GetQueryString("mv");
			  this.comment.orderid = this.GetQueryString("orderid");
			  this.comment.movieid = this.GetQueryString("movieid");
	          this.scvTime();
	      },
	      methods:{
	          //提交评论
	          subComment(){
	            this.comment.comment = this.$refs.commentText.value;
	            if(!this.comment.comment){
	                this.errMsg = "您还没有输入评论哟！";
	                return;
	            }
	            let sel = this;
	            if(this.comment.stars<5){
	                $("#commentWindow").hide();
	                jqalert({
	                    title:'提示',
	                    prompt:'太难拉，考虑一下给个5星好不好',
	                    yestext:'设施一个5星',
	                    notext:'就是不给',
	                    yesfn:function () {
	                        $("#jq-alert").remove();
	                        $("#commentWindow").show();
	                    },
	                    nofn:function () {
	                        sel.confirmSubComment();
	                    }
	                }) 
	            }else{
	                sel.confirmSubComment();
	            }
	          },
	          //确认提交评论
	          confirmSubComment(){
				var vueThis = this;
					jAjax("/appVipCard/commentMovie",this.comment,function(data){
						$("#commentWindow").hide();
						vueThis.scvTime();
						if(data.status==0){
							jqtoast('评论成功');
						}else{
							jqtoast(data.message);
						}
					});
	          },
	          scvTime(){
	            var timer = setInterval(()=>{
	                this.wMin -= 1;
	                if(this.wMin<=1){
	                    clearInterval(timer);
	                }
	            },1000);
	        },
	        //打开评论窗口
	        goComment(){
	            $("#commentWindow").show();
	            this.comment.comment='';
	            this.wMin = 10;
	        },
			//获取URL参数
			GetQueryString(name){
				var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if(r!=null)return  unescape(r[2]); return null;
			}
	      }
		})
//滚动条是否在顶部
var isScroll_top = true;
//滚动条是否在底部
var isScrill_bottom = false;
function restoreEvent(event) {
	switch(event.type){
		case "touchstart" :
			$startY = event.touches[0].clientY;
			break;
		case "touchmove" :
			$moveY = event.touches[0].clientY;
			//滑动距离
			touchesY = $startY - $moveY;
			//滚动条顶部
			if(isScroll_top) {
				if(touchesY < 0) {
					event.preventDefault();
				}else{
					var scrollWrap = document.getElementById("scrollWrap");
					if(scrollWrap.scrollHeight == scrollWrap.clientHeight) {
						event.preventDefault();
					}else {
						event.stopPropagation();
					}
				}
			//滚动条底部
			}else if(isScrill_bottom){
				if(touchesY	> 0) {
					event.preventDefault();
				}else{
					event.stopPropagation();
				}
			}
			break;
		case "touchend" :
			break;
	}
}
/*监听容器的 touch 触发事件处理逻辑*/
document.getElementById("scrollWrap").addEventListener("touchstart",restoreEvent);
document.getElementById("scrollWrap").addEventListener("touchmove",restoreEvent);
document.getElementById("scrollWrap").addEventListener("touchend",restoreEvent);
/*监听容器 scroll 滚动事件处理逻辑*/
document.getElementById("scrollWrap").addEventListener("scroll",function() {
    var tabView = document.getElementById("scrollWrap");
    var contentHeight = tabView.scrollHeight, //内容高度
    scrollTop = tabView.scrollTop; //滚动高度
    viewHeight = tabView.clientHeight;

	if(scrollTop == 0) {
		isScroll_top = true;
	}else{
		isScroll_top = false;
	}
    if ((scrollTop / (contentHeight - viewHeight)) == 1 ) {
        isScrill_bottom = true;
    }else {
    	isScrill_bottom = false;
    }
});


	  </script>

	</html>