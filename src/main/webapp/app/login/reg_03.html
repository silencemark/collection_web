<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>注册</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" >
<link type="text/css" rel="stylesheet" href="../appcssjs/style/public.css">
<link type="text/css" rel="stylesheet" href="../appcssjs/style/login.css">
<script type="text/javascript" src="../appcssjs/script/jquery-1.10.2.min.js"></script>
<link rel="stylesheet" href="../appcssjs/sweetalert/dist/sweetalert.css">
<script src="../appcssjs/sweetalert/dist/sweetalert-dev.js"></script>  
<script type="text/javascript" src="../appcssjs/script/tab.js"></script>
<script type="text/javascript" src="../appcssjs/script/page.js"></script>

<script type="text/javascript" src="../appcssjs/script/appendjs.js"></script>
<script type="text/javascript" src="../appcssjs/script/cache.js"></script>
<script type="text/javascript" src="../appcssjs/script/constant.js"></script>
<script type="text/javascript">
	var pageWidth = window.innerWidth;
	var pageHeight = window.innerHeight;
	var navWidth;
	if (typeof pageWidth != "number")
	{
		if(document.compatMode == "CSS1Compat")
		{
			pageWidth = document.documentElement.clientWidth;
			pageHeight = document.documentElement.clientHeight;
		}
		else
		{
			pageWidth = document.body.clientWidth;
			pageHeight = document.body.clientHeight;
		}
	}
	navWidth = (pageWidth - 200-30)/3;
	
	$(document).ready(function(){
	 $(".reg_nav i").width(navWidth);
});
</script>
<script type="text/javascript">
var phone=getUrlParam("phone");
$('#phone').text(phone);
function regUser(){
	var password=$('#password').val();
	var password1=$('#password1').val();
	var companyname=$('#companyname').val();
	var realname=$('#realname').val();
	if(password==""){
		swal({
			title : "",
			text : "请输入长度6-16位密码",
			type : "error",
			showCancelButton : false,
			confirmButtonColor : "#ff7922",
			confirmButtonText : "确认",
			cancelButtonText : "取消",
			closeOnConfirm : true
		}, function(){
			$('#password').focus();
		});
		return;
	}
	if(password != password1){
		swal({
			title : "",
			text : "两次密码不一致，请重新输入",
			type : "error",
			showCancelButton : false,
			confirmButtonColor : "#ff7922",
			confirmButtonText : "确认",
			cancelButtonText : "取消",
			closeOnConfirm : true
		}, function(){
			$('#password').focus();
		});
		return;
	}
	if(companyname==""){
		swal({
			title : "",
			text : "请输入餐厅/公司名称",
			type : "error",
			showCancelButton : false,
			confirmButtonColor : "#ff7922",
			confirmButtonText : "确认",
			cancelButtonText : "取消",
			closeOnConfirm : true
		}, function(){
			$('#companyname').focus();
		});
		return;
	}
	if(realname==""){
		swal({
			title : "",
			text : "请输入管理员姓名",
			type : "error",
			showCancelButton : false,
			confirmButtonColor : "#ff7922",
			confirmButtonText : "确认",
			cancelButtonText : "取消",
			closeOnConfirm : true
		}, function(){
			$('#realname').focus();
		});
		return;
	}
	var param = new Object();
	param.phone = phone;
	param.realname = realname;
	param.companyname = companyname;
	param.password = password;
	$.ajax({
		type:'post',
		dataType:'json',
		url:projectpath+'/app/register',
		data:param,
		beforeSend:function(a,b){
			ajaxbefore();
		},
		complete:function(a,b){
			ajaxcomplete();
		},
		success:function(data){
			if(data.status==1){
				swal({
					title : "",
					text : data.message,
					type : "error",
					showCancelButton : false,
					confirmButtonColor : "#ff7922",
					confirmButtonText : "确认",
					cancelButtonText : "取消",
					closeOnConfirm : true
				}, function(){
					
				});
			}else{
				location.href='reg_04.html';
			}
		}
	})
}
</script>
</head>

<body class="body_bg">
<div class="head_box">
	<a class="ico_back" onclick="goBackPage();">返回</a>
    <div class="name">注册</div>
</div>
<div class="head_none"></div>
<div class="reg_nav">
	<span class="active"><img src="../appcssjs/images/login/ico_a.png"></span>
    <i class="active">line</i>
    <span class="active"><img src="../appcssjs/images/login/ico_b.png"></span>
    <i class="active">line</i>
    <span class="active"><img src="../appcssjs/images/login/ico_c.png"></span>
    <i>line</i>
    <span><img src="../appcssjs/images/login/ico_d.png"></span>
    <div class="clear"></div>
</div>
<div class="reg_box">
    <span class="bg03" id="phone"></span>
    <span class="bg05"><div class="must">*</div><input type="password" placeholder="请输入长度6-16位密码" id="password"></span>
    <span class="bg06"><div class="must">*</div><input type="password" placeholder="请确认密码" id="password1"></span>
    <span class="bg01"><div class="must">*</div><input type="text" placeholder="请输入餐厅/公司名称" id="companyname"></span>
    <span class="bg02"><input type="text" placeholder="请输入管理员姓名" id="realname"></span>
    <b><input type="button" value="同意《用户协议》并注册" class="btn_next" onclick="regUser()"  style="background: #ff9b30"></b>
</div>
</body>
</html>
